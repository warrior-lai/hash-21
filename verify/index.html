<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Verificaci√≥n de Autenticidad ‚Äî Hash21</title>
<meta name="description" content="Verifica la autenticidad de obras certificadas on-chain en Hash21. Ingresa el hash SHA-256 para confirmar la certificaci√≥n de la obra.">

<!-- Open Graph Meta Tags -->
<meta property="og:title" content="Verificaci√≥n de Autenticidad - Hash21">
<meta property="og:description" content="Verifica la autenticidad de obras certificadas on-chain en Hash21.">
<meta property="og:image" content="https://hash21.studio/img/obra1.jpg">
<meta property="og:url" content="https://hash21.studio/verify">
<meta property="og:type" content="website">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

<style>
:root {
  --bg: #fafaf8;
  --bg2: #f2f0ec;
  --bg3: #eae8e3;
  --text: #1a1a1a;
  --text-dim: #999;
  --text-mid: #666;
  --accent: #1a1a1a;
  --gold: #b08d57;
  --border: rgba(0,0,0,0.07);
  --success: #22c55e;
  --error: #ef4444;
}

* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; }
body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Inter', sans-serif;
  line-height: 1.6;
  overflow-x: hidden;
  font-weight: 300;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* HEADER */
header {
  position: fixed;
  top: 0;
  width: 100%;
  padding: 28px 60px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 100;
  background: rgba(250,250,248,0.95);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
}
.logo {
  font-family: 'Cormorant Garamond', serif;
  font-size: 22px;
  font-weight: 400;
  letter-spacing: 6px;
  text-transform: uppercase;
  text-decoration: none;
  color: var(--text);
}
.logo span { color: var(--gold); }

/* LANG SWITCH */
.lang-switch { display: flex; gap: 4px; align-items: center; }
.lang-btn {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text-dim);
  font-family: 'Inter', sans-serif;
  font-size: 9px;
  letter-spacing: 1px;
  padding: 4px 8px;
  cursor: pointer;
  transition: all 0.3s;
}
.lang-btn.active { border-color: var(--gold); color: var(--gold); }

/* MAIN CONTENT */
main {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 120px 60px 80px;
  max-width: 800px;
  margin: 0 auto;
  width: 100%;
}

.verify-header {
  text-align: center;
  margin-bottom: 60px;
}

.verify-title {
  font-family: 'Cormorant Garamond', serif;
  font-size: 42px;
  font-weight: 400;
  letter-spacing: 2px;
  margin-bottom: 20px;
  color: var(--text);
}

.verify-subtitle {
  font-size: 16px;
  color: var(--text-dim);
  line-height: 1.6;
  max-width: 600px;
  margin: 0 auto;
}

.verify-form {
  width: 100%;
  max-width: 500px;
  margin-bottom: 40px;
}

.input-group {
  margin-bottom: 20px;
}

.hash-input {
  width: 100%;
  padding: 20px;
  border: 1px solid var(--border);
  background: #fff;
  font-family: 'Inter', monospace;
  font-size: 14px;
  border-radius: 8px;
  transition: all 0.3s;
  resize: none;
  min-height: 80px;
}

.hash-input:focus {
  outline: none;
  border-color: var(--gold);
  box-shadow: 0 0 0 2px rgba(176, 141, 87, 0.1);
}

.hash-input::placeholder {
  color: var(--text-dim);
  font-family: 'Inter', sans-serif;
}

.verify-btn {
  width: 100%;
  padding: 16px 32px;
  background: var(--text);
  color: #fff;
  border: none;
  font-family: 'Inter', sans-serif;
  font-size: 12px;
  letter-spacing: 2px;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.3s;
  border-radius: 4px;
  font-weight: 400;
}

.verify-btn:hover {
  background: var(--gold);
}

.verify-btn:disabled {
  background: var(--text-dim);
  cursor: not-allowed;
}

.qr-note {
  text-align: center;
  color: var(--text-dim);
  font-size: 12px;
  margin-top: 15px;
  padding: 15px;
  background: var(--bg2);
  border-radius: 4px;
  border-left: 3px solid var(--gold);
}

/* RESULTS */
.result {
  width: 100%;
  margin-top: 40px;
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.5s ease;
}

.result.show {
  opacity: 1;
  transform: translateY(0);
}

.result.success {
  border: 1px solid var(--success);
  background: rgba(34, 197, 94, 0.05);
  border-radius: 8px;
  padding: 30px;
}

.result.error {
  border: 1px solid var(--error);
  background: rgba(239, 68, 68, 0.05);
  border-radius: 8px;
  padding: 30px;
  text-align: center;
}

.success-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  color: var(--success);
  font-weight: 500;
  font-size: 16px;
  margin-bottom: 25px;
}

.artwork-details {
  display: grid;
  grid-template-columns: 200px 1fr;
  gap: 30px;
  align-items: start;
}

.artwork-image {
  width: 100%;
  height: 200px;
  object-fit: cover;
  border-radius: 4px;
  border: 1px solid var(--border);
}

.artwork-info h3 {
  font-family: 'Cormorant Garamond', serif;
  font-size: 24px;
  font-weight: 400;
  margin-bottom: 5px;
}

.artwork-meta {
  color: var(--text-dim);
  font-size: 14px;
  line-height: 1.8;
  margin-bottom: 20px;
}

.artwork-meta strong {
  color: var(--text);
  font-weight: 400;
}

.cert-info {
  background: var(--bg);
  padding: 20px;
  border-radius: 4px;
  border: 1px solid var(--border);
  font-size: 12px;
  color: var(--text-dim);
  line-height: 1.6;
}

.cert-info strong {
  color: var(--text);
}

.error-message {
  font-size: 16px;
  color: var(--error);
  margin-bottom: 10px;
}

.error-description {
  font-size: 14px;
  color: var(--text-dim);
}

/* FOOTER */
footer {
  padding: 40px 60px 20px;
  border-top: 1px solid var(--border);
  background: var(--bg2);
  margin-top: auto;
  text-align: center;
}

.footer-text {
  color: var(--text-dim);
  font-size: 10px;
  letter-spacing: 2px;
  text-transform: uppercase;
}

/* RESPONSIVE */
@media (max-width: 768px) {
  header {
    padding: 20px 20px;
  }
  
  main {
    padding: 100px 20px 60px;
  }
  
  .verify-title {
    font-size: 32px;
  }
  
  .verify-subtitle {
    font-size: 14px;
  }
  
  .artwork-details {
    grid-template-columns: 1fr;
    gap: 20px;
    text-align: center;
  }
  
  .artwork-image {
    max-width: 250px;
    margin: 0 auto;
  }
  
  footer {
    padding: 30px 20px 15px;
  }
}
</style>
</head>
<body>

<header>
  <div style="display: flex; align-items: center; gap: 20px;">
    <a href="https://hash21.studio" style="color: var(--text-dim); text-decoration: none; font-size: 10px; letter-spacing: 2px; text-transform: uppercase; transition: color 0.3s;" onmouseover="this.style.color='var(--text)'" onmouseout="this.style.color='var(--text-dim)'">‚Üê Volver a Hash21</a>
    <a href="https://hash21.studio" class="logo">HASH<span>21</span></a>
  </div>
  <div class="lang-switch">
    <button class="lang-btn active" data-lang="es" onclick="setLang('es')">ES</button>
    <button class="lang-btn" data-lang="en" onclick="setLang('en')">EN</button>
  </div>
</header>

<main>
  <div class="verify-header">
    <h1 class="verify-title" data-i18n="verify_title">Verificaci√≥n de Autenticidad</h1>
    <p class="verify-subtitle" data-i18n="verify_subtitle">
      Ingres√° el hash SHA-256 de la obra para verificar su certificaci√≥n on-chain
    </p>
  </div>

  <form class="verify-form" onsubmit="verifyHash(event)">
    <div class="input-group">
      <textarea 
        class="hash-input" 
        id="hashInput" 
        placeholder="Peg√° aqu√≠ el hash SHA-256 (64 caracteres hexadecimales)" 
        data-i18n-placeholder="verify_input_placeholder"
        maxlength="64"
        required
      ></textarea>
    </div>
    <button type="submit" class="verify-btn" data-i18n="verify_button">
      Verificar
    </button>
  </form>

  <div class="qr-note" data-i18n="verify_qr_note">
    üí° <strong>Consejo:</strong> Escane√° el QR del certificado para obtener el hash autom√°ticamente
  </div>

  <div id="result" class="result"></div>
</main>

<footer>
  <div class="footer-text">Hash21 ¬© 2026 ‚Äî Powered by proof of work ‚ö°</div>
</footer>

<script src="../lang.js"></script>
<script>
// Verificaci√≥n de hash
async function verifyHash(event) {
  event.preventDefault();
  
  const hashInput = document.getElementById('hashInput');
  const resultDiv = document.getElementById('result');
  const hash = hashInput.value.trim().toLowerCase();
  
  // Validar formato del hash
  if (!isValidSHA256(hash)) {
    showError('verify_error_invalid', 'verify_error_invalid_desc');
    return;
  }
  
  // Cargar base de datos y verificar
  try {
    const response = await fetch('./db.json');
    const artworks = await response.json();
    
    const found = artworks.find(artwork => artwork.hash.toLowerCase() === hash);
    
    if (found) {
      showSuccess(found);
    } else {
      showError('verify_error_not_found', 'verify_error_not_found_desc');
    }
  } catch (error) {
    console.error('Error loading database:', error);
    showError('verify_error_database', 'verify_error_database_desc');
  }
}

function isValidSHA256(hash) {
  return /^[a-fA-F0-9]{64}$/.test(hash);
}

function showSuccess(artwork) {
  const resultDiv = document.getElementById('result');
  const currentLang = getCurrentLang();
  
  const successBadgeText = currentLang === 'es' 
    ? '‚úì Autenticidad Verificada' 
    : '‚úì Authenticity Verified';
    
  const certDateText = currentLang === 'es'
    ? 'Fecha de certificaci√≥n'
    : 'Certification date';
    
  const timestampText = currentLang === 'es'
    ? 'Servicio de timestamp'
    : 'Timestamp service';
  
  resultDiv.innerHTML = `
    <div class="success-badge">${successBadgeText}</div>
    <div class="artwork-details">
      <img src="${artwork.image}" alt="${artwork.title}" class="artwork-image" />
      <div class="artwork-info">
        <h3>${artwork.title}</h3>
        <div class="artwork-meta">
          <strong>${artwork.artist}</strong> (${artwork.year})<br>
          ${artwork.technique}<br>
          <em>${artwork.series}</em>
        </div>
        <div class="cert-info">
          <strong>${certDateText}:</strong> ${formatDate(artwork.certification_date)}<br>
          <strong>${timestampText}:</strong> ${artwork.timestamp_service}<br>
          <strong>Hash:</strong> <code style="font-size:10px; word-break: break-all;">${artwork.hash}</code>
        </div>
        ${artwork.bitcoin_block ? `
        <div class="cert-info" style="margin-top:15px;padding-top:15px;border-top:1px solid var(--border);">
          <strong style="color:var(--gold);">‚õì ${currentLang === 'es' ? 'Anclaje en Bitcoin' : 'Bitcoin Anchor'}</strong><br>
          <strong>Block:</strong> #${artwork.bitcoin_block}<br>
          <strong>Merkle Root:</strong> <code style="font-size:9px;word-break:break-all;">${artwork.merkle_root}</code><br>
          <a href="${artwork.mempool_url}" target="_blank" style="display:inline-block;margin-top:10px;padding:10px 20px;border:1px solid var(--gold);color:var(--gold);text-decoration:none;font-size:11px;letter-spacing:2px;text-transform:uppercase;transition:all 0.3s;"
            onmouseover="this.style.background='var(--gold)';this.style.color='#fff';"
            onmouseout="this.style.background='transparent';this.style.color='var(--gold)';">
            ${currentLang === 'es' ? 'üîç Ver en Mempool.space' : 'üîç View on Mempool.space'}
          </a>
        </div>
        ` : ''}
      </div>
    </div>
  `;
  
  resultDiv.className = 'result success show';
}

function showError(titleKey, descKey) {
  const resultDiv = document.getElementById('result');
  const title = translations[getCurrentLang()][titleKey] || titleKey;
  const desc = translations[getCurrentLang()][descKey] || descKey;
  
  resultDiv.innerHTML = `
    <div class="error-message">${title}</div>
    <div class="error-description">${desc}</div>
  `;
  
  resultDiv.className = 'result error show';
}

function formatDate(dateStr) {
  const date = new Date(dateStr);
  const currentLang = getCurrentLang();
  
  return date.toLocaleDateString(currentLang === 'es' ? 'es-AR' : 'en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
}

function getCurrentLang() {
  return localStorage.getItem('hash21-lang') || 'es';
}

// Limpiar resultado cuando se modifica el input
document.getElementById('hashInput').addEventListener('input', function() {
  const resultDiv = document.getElementById('result');
  resultDiv.className = 'result';
});

// Inicializar idioma
document.addEventListener('DOMContentLoaded', function() {
  const savedLang = getCurrentLang();
  setLang(savedLang);
});
</script>

</body>
</html>